// Import Libraries
import qupath.lib.objects.PathObject
import qupath.lib.io.PathIO

// First, create an annotation and save it as GeoJSON file. You will need to specify this path in the script here. (For best results, it is recommended that all the images you plan to use with this script have the same field of view. If the field of view differs, you may need to manually adjust the position of the annotation after loading it onto the image.)
def filePath = 'C:/Users/xuehe/Desktop/Script/Circle.geojson'

// This checks if the annotation loads correctly, and it places the annotation onto the current image
def file = new File(filePath)
def annotations = PathIO.readObjects(file)

if (annotations != null && !annotations.isEmpty()) {
    def imageData = getCurrentImageData()
    annotations.each { annotation ->
        if (annotation instanceof PathObject) {
            imageData.getHierarchy().addObject(annotation)
        }
    }
    fireHierarchyUpdate()
    print 'Successful!'
} else {
    print 'Failed'
}
